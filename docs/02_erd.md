# E-Commerce 서비스 ERD
![image](https://github.com/user-attachments/assets/0ce0e8a0-7f1d-4db7-adc8-a65960eb421d)

## 공통 컬럼
- `created_at` : 생성 시간
- `modified_at` : 수정 시간

위와 같은 공통 컬럼은 ERD에서 제외하였습니다.

## 설계 고민
ERD 내에는 포함되지 않습니다.

### 1. 상품 정보 변경 시 데이터 스냅샷 관리
- 지난 강의 신청 과제에서 `사용자가 이미 수강 신청한 정보가 있고, 연결된 강의 정보가 변경되면 어떻게 관리해야 할까?`라는 고민이 있었습니다.
당시에는 신청 시점의 강의 정보를 스냅샷으로 저장하는 방식을 고려했으나, 이 방식은 데이터 중복이 발생하는 단점이 있습니다. 신청 건수만큼 동일한 강의 정보가 중복 저장될 가능성이 큽니다.

- 이번 상품 정보에서도 같은 고민을 했습니다.
대안으로, 사용자가 구매할 때가 아니라, 상품 정보가 변경될 때마다 스냅샷을 생성하고, 이를 구매나 신청 정보와 연결하는 방법을 생각했습니다.
하지만 이 방식 역시 JOIN 연산이 증가하여 성능에 영향을 미칠 수 있다는 우려가 있습니다.

### 2. 만료 기간 설정 관련 고민
- 쿠폰 기간 만료 시 상태 변경
- 일정 시간 내 결제되지 않은 주문 만료 처리

이와 같이 시간에 따라 처리가 달라지는 프로세스가 존재합니다.

- **배치** : repo를 따로 두지 않는 이번 프로젝트에서 배치를 만드는 건 적절치 않아 보임.
- **DB 트리거** : 비즈니스 로직과 DB 간 의존성이 강해지므로 제외.
- **스케줄링** : 다수의 인스턴스 환경에서 실행 중복 또는 충돌 가능성이 있어 부적합.

`Redis`나 `Kafka`에 해결 방안이 있을 것 같은데, 이후 커리큘럼에서 진행할 것 같으므로 해당 기능을 보류하기로 합니다.


